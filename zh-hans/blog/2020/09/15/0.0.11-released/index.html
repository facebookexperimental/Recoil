<!doctype html>
<html lang="zh-hans" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/zh-hans/blog/rss.xml" title="Recoil RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-hans/blog/atom.xml" title="Recoil Atom Feed">
<link rel="alternate" type="application/json" href="/zh-hans/blog/feed.json" title="Recoil JSON Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-44373548-46","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Recoil" href="/zh-hans/opensearch.xml"><title data-react-helmet="true">Recoil 0.0.11 | Recoil</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://recoiljs.org/zh-hans/img/og-image.png"><meta data-react-helmet="true" name="twitter:image" content="https://recoiljs.org/zh-hans/img/og-image.png"><meta data-react-helmet="true" property="og:url" content="https://recoiljs.org/zh-hans/blog/2020/09/15/0.0.11-released"><meta data-react-helmet="true" name="docsearch:language" content="zh-hans"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Recoil 0.0.11 | Recoil"><meta data-react-helmet="true" name="description" content="Today we are releasing Recoil 0.0.11. It contains bug fixes, new features, better performance, and experimental compatibility with Concurrent Mode. Thank you so much to everyone who contributed to this release!"><meta data-react-helmet="true" property="og:description" content="Today we are releasing Recoil 0.0.11. It contains bug fixes, new features, better performance, and experimental compatibility with Concurrent Mode. Thank you so much to everyone who contributed to this release!"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2020-09-15T00:00:00.000Z"><link data-react-helmet="true" rel="icon" href="/zh-hans/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://recoiljs.org/zh-hans/blog/2020/09/15/0.0.11-released"><link data-react-helmet="true" rel="alternate" href="https://recoiljs.org/blog/2020/09/15/0.0.11-released" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://recoiljs.org/fr/blog/2020/09/15/0.0.11-released" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://recoiljs.org/ko/blog/2020/09/15/0.0.11-released" hreflang="ko"><link data-react-helmet="true" rel="alternate" href="https://recoiljs.org/zh-hans/blog/2020/09/15/0.0.11-released" hreflang="zh-hans"><link data-react-helmet="true" rel="alternate" href="https://recoiljs.org/blog/2020/09/15/0.0.11-released" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/zh-hans/assets/css/styles.db9b7857.css">
<link rel="preload" href="/zh-hans/assets/js/runtime~main.903fd857.js" as="script">
<link rel="preload" href="/zh-hans/assets/js/main.db753dd7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">è·³è½¬åˆ°ä¸»è¦å†…å®¹</a></div><div class="announcementBar_axC9" style="background-color:#20232a;color:#fff" role="banner"><div class="announcementBarContent_6uhP">Support Ukraine ğŸ‡ºğŸ‡¦ <a target="_blank" rel="noopener noreferrer" href="https://opensource.fb.com/support-ukraine">Help Provide Humanitarian Aid to Ukraine</a>.</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/zh-hans/"><div class="navbar__logo"><img src="/zh-hans/img/logo.svg" alt="Recoil" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/zh-hans/img/logo--dark.svg" alt="Recoil" class="themedImage_TMUO themedImage--dark_uzRr"></div></a><a class="navbar__item navbar__link" href="/zh-hans/docs/introduction/installation">æ–‡æ¡£</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-hans/blog">Blog</a><a class="navbar__item navbar__link" href="/zh-hans/docs/recoil-sync/introduction">Recoil Sync</a><a class="navbar__item navbar__link" href="/zh-hans/docs/refine/Introduction">Refine</a><a class="navbar__item navbar__link" href="/zh-hans/resources">å¤–éƒ¨èµ„æº</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebookexperimental/Recoil" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_EbrZ"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>ç®€ä½“ä¸­æ–‡</span></span></a><ul class="dropdown__menu"><li><a href="/blog/2020/09/15/0.0.11-released" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/fr/blog/2020/09/15/0.0.11-released" target="_self" rel="noopener noreferrer" class="dropdown__link">FranÃ§ais</a></li><li><a href="/ko/blog/2020/09/15/0.0.11-released" target="_self" rel="noopener noreferrer" class="dropdown__link">í•œêµ­ì–´</a></li><li><a href="/zh-hans/blog/2020/09/15/0.0.11-released" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">ç®€ä½“ä¸­æ–‡</a></li></ul></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="æœ€è¿‘åšæ–‡å¯¼èˆª"><div class="sidebarItemTitle_9G5K margin-bottom--md">Recent posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zh-hans/blog/2022/03/25/0.7.0-release">Recoil 0.7</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zh-hans/blog/2022/01/28/0.6.0-release">Recoil 0.6</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zh-hans/blog/2021/11/03/0.5.0-release">Recoil 0.5</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zh-hans/blog/2021/08/26/0.4.1-release">Recoil 0.4.1</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zh-hans/blog/2021/07/30/0.4.0-release">Recoil 0.4</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Recoil 0.0.11</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2020-09-15T00:00:00.000Z" itemprop="datePublished">2020å¹´9æœˆ15æ—¥</time> Â· <!-- -->é˜…è¯»æ—¶é—´ä¸º 6 åˆ†é’Ÿ</div></header><div class="markdown" itemprop="articleBody"><p>Today we are releasing Recoil 0.0.11. It contains bug fixes, new features, better performance, and experimental compatibility with Concurrent Mode. Thank you so much to everyone who contributed to this release!</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="experimental-concurrent-mode-support">Experimental Concurrent Mode Support<a class="hash-link" href="#experimental-concurrent-mode-support" title="é“¾æ¥åˆ°å¤´éƒ¨çš„æ ‡ç­¾">â€‹</a></h2><p>Recoil now supports <a href="https://reactjs.org/docs/concurrent-mode-intro.html" target="_blank" rel="noopener noreferrer">Concurrent Mode</a> when used with the <code>experimental</code> release of React. Please try this out and report any problems!</p><p>Concurrent Mode, which enables smoother, more consistent user experiences, is the future of React. But up until now it&#x27;s been incompatible with any kind of external state. This is because, in Concurrent Mode, renders can be spread out over time: React can pause the rendering of components, then later pick up where it left off, starting from the partial component tree that it already built:</p><img alt="React pauses while rendering a tree of components. Some components are rendered before the pause while others are rendered after the pause." src="/zh-hans/img/blog/2020-09-02-0.0.11-released/concurrent2.png"><p>This presents a problem with external state. Since React now relinquishes control flow, anything could happen between the time when rendering starts and when it is completed. If the external state changes during this time, it will result in an inconsistent UI, as the earlier-rendered components will observe the older state, while the later-rendered components will observe the new state:</p><img alt="If components depend on some external state, and that state changes while rendering is paused, then components rendered before the pause will observe the old state, while components rendered after the pause will observe the new state." src="/zh-hans/img/blog/2020-09-02-0.0.11-released/concurrent3.png"><p>This inconsistency could cause problems up to crashing the app.</p><p>Recoil now takes advantage of experimental APIs in React to handle this situation by restarting with a fresh tree when Recoil state has changed during a render. These APIs also make Recoil more efficient and remove the need to re-render components when they&#x27;re first mounted.</p><p>Avoid using React experimental releases in production.  And, no matter what release of React or state management library you use, <a href="https://gist.github.com/sebmarkbage/75f0838967cd003cd7f9ab938eb1958f" target="_blank" rel="noopener noreferrer">avoid bugs by always keeping side-effects in a <code>useEffect()</code> hook, not during render</a>!  (<a href="https://github.com/davidmccabe" target="_blank" rel="noopener noreferrer">@davidmccabe</a>, <a href="https://github.com/bvaughn" target="_blank" rel="noopener noreferrer">@bvaughn</a>)</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="performance">Performance<a class="hash-link" href="#performance" title="é“¾æ¥åˆ°å¤´éƒ¨çš„æ ‡ç­¾">â€‹</a></h2><p>Several changes improve Recoil&#x27;s performance. Previously, Recoil sometimes had to re-render components in certain circumstances: when reading from selectors that had unknown dependencies and when reading from atoms that had been initialized from external storage. Now, Recoil never has to perform a second render in response to reading an atom or selector. (<a href="https://github.com/davidmccabe" target="_blank" rel="noopener noreferrer">@davidmccabe</a>)</p><p>Secondly, when used with the <code>experimental</code> release of React, Recoil no longer has to perform a second render when components are initially mounted. Recoil also no longer has to do any work to look up atom or selector values when it re-renders for reasons other than that atom or selector changing. (<a href="https://github.com/davidmccabe" target="_blank" rel="noopener noreferrer">@davidmccabe</a>, <a href="https://github.com/bvaughn" target="_blank" rel="noopener noreferrer">@bvaughn</a>).</p><p>The basic hooks such as <code>useRecoilValue()</code> and <code>useRecoilState()</code> have been optimized and are now about 8<!-- -->Ã—<!-- --> faster. They now typically take less than 2<!-- -->Ã—<!-- --> as long as <code>useState()</code> to execute. This improves the performance of apps that use a large number of atoms in many components. (<a href="https://github.com/davidmccabe" target="_blank" rel="noopener noreferrer">@davidmccabe</a>)</p><p>Recoil recursively freezes the contents of atoms and selectors. This prevents bugs, but can be slow with large objects. It now happens only in the development build. (<a href="https://github.com/facebookexperimental/Recoil/pull/361" target="_blank" rel="noopener noreferrer">#361</a> <!-- -->â€”<!-- --> <a href="https://github.com/drarmstr" target="_blank" rel="noopener noreferrer">@drarmstr</a>)</p><p>Recoil now avoids re-rendering components or re-evaluating selectors if you set an atom to its already-set value or reset it when it is already reset (<a href="https://github.com/facebookexperimental/Recoil/pull/399" target="_blank" rel="noopener noreferrer">#399</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/386" target="_blank" rel="noopener noreferrer">#386</a> <!-- -->â€”<!-- --> <a href="https://github.com/drarmstr" target="_blank" rel="noopener noreferrer">@drarmstr</a>).</p><p>Finally, this release also fixes a memory leak introduced in the previous release. If you&#x27;ve been experiencing poor performance in apps that frequently update atoms, this was likely the cause. (<a href="https://github.com/facebookexperimental/Recoil/pull/471" target="_blank" rel="noopener noreferrer">#471</a> <!-- -->â€”<!-- --> <a href="https://github.com/davidmccabe" target="_blank" rel="noopener noreferrer">@davidmccabe</a>)</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="types-and-packaging">Types and Packaging<a class="hash-link" href="#types-and-packaging" title="é“¾æ¥åˆ°å¤´éƒ¨çš„æ ‡ç­¾">â€‹</a></h2><p><a href="https://flow.org/" target="_blank" rel="noopener noreferrer">Flow types</a> are now exported with the package in addition to TypeScript. Flow is the type system used at Facebook and that Recoil is actually written in. (<a href="https://github.com/facebookexperimental/Recoil/pull/338" target="_blank" rel="noopener noreferrer">#338</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/468" target="_blank" rel="noopener noreferrer">#468</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/541" target="_blank" rel="noopener noreferrer">#541</a> <!-- -->â€”<!-- --> <a href="https://github.com/Brianzchen" target="_blank" rel="noopener noreferrer">@Brianzchen</a>, <a href="https://github.com/Komalov" target="_blank" rel="noopener noreferrer">@Komalov</a>, <a href="https://github.com/mondaychen" target="_blank" rel="noopener noreferrer">@mondaychen</a>)</p><p>TypeScript typing is also improved (<a href="https://github.com/facebookexperimental/Recoil/pull/492" target="_blank" rel="noopener noreferrer">#492</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/545" target="_blank" rel="noopener noreferrer">#545</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/548" target="_blank" rel="noopener noreferrer">#548</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/568" target="_blank" rel="noopener noreferrer">#568</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/575" target="_blank" rel="noopener noreferrer">#575</a> <!-- -->â€”<!-- --> <a href="https://github.com/csantos42" target="_blank" rel="noopener noreferrer">@csantos42</a>, <a href="https://github.com/SergeyVolynkin" target="_blank" rel="noopener noreferrer">@SergeyVolynkin</a>, <a href="https://github.com/drarmstr" target="_blank" rel="noopener noreferrer">@drarmstr</a>, <a href="https://github.com/hachibeeDI" target="_blank" rel="noopener noreferrer">@hachibeeDI</a>).</p><p>In addition to NPM packages, we now provide <a href="/zh-hans/docs/introduction/installation#cdn">Common JS and UMD modules via CDN</a> (<a href="https://github.com/facebookexperimental/Recoil/pull/413" target="_blank" rel="noopener noreferrer">#413</a> <!-- -->â€”<!-- --> <a href="https://github.com/mondaychen" target="_blank" rel="noopener noreferrer">@mondaychen</a>, <a href="https://github.com/pocket7878" target="_blank" rel="noopener noreferrer">@pocket7878</a>).</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="support-for-multiple-react-roots">Support for Multiple React Roots<a class="hash-link" href="#support-for-multiple-react-roots" title="é“¾æ¥åˆ°å¤´éƒ¨çš„æ ‡ç­¾">â€‹</a></h2><p>You can now <a href="/zh-hans/docs/api-reference/core/useRecoilBridgeAcrossReactRoots">share state between multiple React roots</a>.  For example, if your app uses both React DOM and another renderer such as ThreeJS, you can now share Recoil state between them. As always when using multiple React roots, they may be momentarily out of sync. (<a href="https://github.com/facebookexperimental/Recoil/pull/298" target="_blank" rel="noopener noreferrer">#298</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/516" target="_blank" rel="noopener noreferrer">#516</a> <!-- -->â€”<!-- --> <a href="https://github.com/drarmstr" target="_blank" rel="noopener noreferrer">@drarmstr</a>, <a href="https://github.com/inlet" target="_blank" rel="noopener noreferrer">@inlet</a>)</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="developer-tool-apis">Developer Tool APIs<a class="hash-link" href="#developer-tool-apis" title="é“¾æ¥åˆ°å¤´éƒ¨çš„æ ‡ç­¾">â€‹</a></h2><p>This release includes <a href="/zh-hans/docs/api-reference/core/Snapshot#developer-tools">experimental APIs</a> intended for developer tools. We are creating a set of developer tools internally and there are also multiple open-source projects underway. We are releasing these APIs to help validate their design. (<a href="https://github.com/drarmstr" target="_blank" rel="noopener noreferrer">@drarmstr</a>)</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="other-new-apis">Other New APIs<a class="hash-link" href="#other-new-apis" title="é“¾æ¥åˆ°å¤´éƒ¨çš„æ ‡ç­¾">â€‹</a></h2><p>You can now use a Promise as the default value of an atom. When read it will behave like an async selector. (<a href="https://github.com/drarmstr" target="_blank" rel="noopener noreferrer">@drarmstr</a>)</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="bug-fixes">Bug Fixes<a class="hash-link" href="#bug-fixes" title="é“¾æ¥åˆ°å¤´éƒ¨çš„æ ‡ç­¾">â€‹</a></h2><p>This update has many fixes related to test infrastructure and differences between the open-source and Facebook-internal environments. (<a href="https://github.com/facebookexperimental/Recoil/pull/368" target="_blank" rel="noopener noreferrer">#368</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/360" target="_blank" rel="noopener noreferrer">#360</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/362" target="_blank" rel="noopener noreferrer">#362</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/363" target="_blank" rel="noopener noreferrer">#363</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/392" target="_blank" rel="noopener noreferrer">#392</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/431" target="_blank" rel="noopener noreferrer">#431</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/402" target="_blank" rel="noopener noreferrer">#402</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/538" target="_blank" rel="noopener noreferrer">#538</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/539" target="_blank" rel="noopener noreferrer">#539</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/549" target="_blank" rel="noopener noreferrer">#549</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/561" target="_blank" rel="noopener noreferrer">#561</a>, <a href="https://github.com/facebookexperimental/Recoil/pull/576" target="_blank" rel="noopener noreferrer">#576</a> <!-- -->â€”<!-- --> <a href="https://github.com/aaronabramov" target="_blank" rel="noopener noreferrer">@aaronabramov</a>, <a href="https://github.com/Komalov" target="_blank" rel="noopener noreferrer">@Komalov</a>, <a href="https://github.com/drarmstr" target="_blank" rel="noopener noreferrer">@drarmstr</a>, <a href="https://github.com/jacques-blom" target="_blank" rel="noopener noreferrer">@jacques-blom</a>, <a href="https://github.com/mondaychen" target="_blank" rel="noopener noreferrer">@mondaychen</a>, <a href="https://github.com/dsainati1" target="_blank" rel="noopener noreferrer">@dsainati1</a>, <a href="https://github.com/csantos42" target="_blank" rel="noopener noreferrer">@csantos42</a>, <a href="https://github.com/behnammodi" target="_blank" rel="noopener noreferrer">@behnammodi</a>, <a href="https://github.com/habond" target="_blank" rel="noopener noreferrer">@habond</a>, <a href="https://github.com/benhalverson" target="_blank" rel="noopener noreferrer">@benhalverson</a>).</p><p>It also fixes bugs when using multiple <code>&lt;RecoilRoot&gt;</code>s or pre-loading selectors in a snapshot (<a href="https://github.com/facebookexperimental/Recoil/pull/534" target="_blank" rel="noopener noreferrer">#534</a> <!-- -->â€”<!-- --> <a href="https://github.com/davemccabe" target="_blank" rel="noopener noreferrer">@davemccabe</a>).</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="breaking-changes">Breaking Changes<a class="hash-link" href="#breaking-changes" title="é“¾æ¥åˆ°å¤´éƒ¨çš„æ ‡ç­¾">â€‹</a></h2><p>This update may break certain tests that don&#x27;t use the <a href="https://reactjs.org/docs/test-utils.html#act" target="_blank" rel="noopener noreferrer"><code>act()</code> function from <code>react-test-utils</code></a> to perform actions affecting React components. These tests sometimes worked anyway due to Recoil&#x27;s extra renders. Use <code>act()</code> to fix any such tests.</p><p>Recoil will now throw an exception if a state updater function provided to Recoil causes another atom update within its own execution. State updater functions are supposed to be pure, so this has always been against the API contract. But it happened to work in some cases before, and now it doesn&#x27;t. Code that does this can be changed to perform the effects with <code>useRecoilCallback()</code>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="future-work">Future Work<a class="hash-link" href="#future-work" title="é“¾æ¥åˆ°å¤´éƒ¨çš„æ ‡ç­¾">â€‹</a></h2><p>In a future release, Recoil will automatically free the memory used by atoms and selectors that are no longer used, and will perform better with larger numbers of atoms. (<a href="https://github.com/davidmccabe" target="_blank" rel="noopener noreferrer">@davidmccabe</a>)</p><p>We are also working on APIs for synchronizing Recoil atoms with external data sources such as the URL, local storage, or a server. (<a href="https://github.com/drarmstr" target="_blank" rel="noopener noreferrer">@drarmstr</a>)</p><p>Developer tools are in development. (<a href="https://github.com/maxijb" target="_blank" rel="noopener noreferrer">@maxijb</a>, <a href="https://github.com/habond" target="_blank" rel="noopener noreferrer">@habond</a>, <a href="https://github.com/drarmstr" target="_blank" rel="noopener noreferrer">@drarmstr</a>)</p><p>Thanks for reading this far and for using Recoil! More releases are coming soon.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Pagination des blog posts"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh-hans/blog/2020/10/30/0.1.1-released"><div class="pagination-nav__sublabel">ä¸Šä¸€ç¯‡</div><div class="pagination-nav__label">Â« <!-- -->Recoil 0.1.1</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh-hans/blog/2020/06/18/0.0.10-released"><div class="pagination-nav__sublabel">ä¸‹ä¸€ç¯‡</div><div class="pagination-nav__label">Recoil 0.0.10<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#experimental-concurrent-mode-support" class="table-of-contents__link toc-highlight">Experimental Concurrent Mode Support</a></li><li><a href="#performance" class="table-of-contents__link toc-highlight">Performance</a></li><li><a href="#types-and-packaging" class="table-of-contents__link toc-highlight">Types and Packaging</a></li><li><a href="#support-for-multiple-react-roots" class="table-of-contents__link toc-highlight">Support for Multiple React Roots</a></li><li><a href="#developer-tool-apis" class="table-of-contents__link toc-highlight">Developer Tool APIs</a></li><li><a href="#other-new-apis" class="table-of-contents__link toc-highlight">Other New APIs</a></li><li><a href="#bug-fixes" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#breaking-changes" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#future-work" class="table-of-contents__link toc-highlight">Future Work</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">å­¦ä¹ </div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh-hans/docs/introduction/getting-started">å¿«é€Ÿä¸Šæ‰‹</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-hans/docs/introduction/core-concepts">æ ¸å¿ƒæ¦‚å¿µ</a></li></ul></div><div class="col footer__col"><div class="footer__title">ç¤¾åŒº</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/recoiljs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>æ¨ç‰¹<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">æ›´å¤š</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebookexperimental/Recoil" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">æ³•å¾‹</div><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener" class="footer__link-item"><span>éšç§<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener" class="footer__link-item"><span>æ¡æ¬¾<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="/zh-hans/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/zh-hans/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright">ç‰ˆæƒæ‰€æœ‰ Â© 2021 Facebook, Inc. ä½¿ç”¨ Docusaurus æ„å»º.</div></div></div></footer></div>
<script src="/zh-hans/assets/js/runtime~main.903fd857.js"></script>
<script src="/zh-hans/assets/js/main.db753dd7.js"></script>
</body>
</html>